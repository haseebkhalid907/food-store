{"ast":null,"code":"var _jsxFileName = \"/Users/Haseeb/im_seeb/Bootcamp2020/food-store/src/components/ItemCard.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\"; //m-ui\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport MuiAlert from \"@material-ui/lab/Alert\"; // Icons\n\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport EditIcon from \"@material-ui/icons/Edit\"; //custom-hook\n\nimport useForm from \"../hooks/forms\";\nimport MyButton from \"../util/MyButton\";\nimport { deleteItem, editItem } from \"../redux/actions/dataActions\";\nimport ItemDialog from \"../components/ItemDialog\";\nimport { addToCart } from \"../redux/actions/dataActions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\"\n  },\n  details: {\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  content: {\n    flex: \"1 0 auto\"\n  },\n  cover: {\n    height: \"180\",\n    width: \"60%\"\n  },\n  snackbar: {\n    width: \"100%\",\n    \"& > * + *\": {\n      marginTop: theme.spacing(2)\n    }\n  }\n}));\n\nfunction Alert(props) {\n  return /*#__PURE__*/_jsxDEV(MuiAlert, {\n    elevation: 6,\n    variant: \"filled\",\n    ...props\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 10\n  }, this);\n}\n\n_c = Alert;\nexport default function ItemCard(props) {\n  _s();\n\n  const classes = useStyles();\n  const {\n    title,\n    imageUrl,\n    description,\n    price,\n    _id\n  } = props;\n  const imageUrlSplit = imageUrl.split(\"\\\\\");\n  const finalImageUrl = `${process.env.REACT_APP_SERVER_URL}/${imageUrlSplit[0]}/${imageUrlSplit[1]}`; //3002 - server port\n\n  const dispatch = useDispatch();\n  const {\n    authenticated,\n    account: {\n      role\n    }\n  } = useSelector(state => state.auth);\n  const {\n    addCartSuccess\n  } = useSelector(state => state.data);\n  const [open, setOpen] = useState(false);\n  const [openSnackBar, setSnackBar] = useState(false);\n  const [image, setImage] = useState(null);\n  const {\n    inputs,\n    handleInputChange\n  } = useForm({\n    title: \"\",\n    description: \"\",\n    price: \"\"\n  });\n\n  const handleFileSelect = event => {\n    setImage(event.target.files[0]);\n  };\n\n  const handleClose = () => {\n    inputs.title = \"\";\n    inputs.description = \"\";\n    inputs.price = \"\";\n    setImage(null);\n    setOpen(false);\n  };\n\n  const handleSubmit = () => {\n    const itemData = new FormData();\n    if (image !== null) itemData.append(\"image\", image);else itemData.append(\"image\", imageUrl);\n    itemData.append(\"title\", inputs.title);\n    itemData.append(\"description\", inputs.description);\n    itemData.append(\"price\", inputs.price);\n    dispatch(editItem(itemData, _id)); // eslint-disable-next-line\n\n    handleClose();\n  };\n\n  const openEdit = () => {\n    inputs.title = title;\n    inputs.price = price;\n    inputs.description = description;\n    setOpen(true);\n  };\n\n  const handleDelete = () => {\n    dispatch(deleteItem(_id));\n  };\n\n  const handleCart = () => {\n    const itemData = {\n      itemId: _id\n    };\n    dispatch(addToCart(itemData));\n  };\n\n  const handleCloseSnackBar = (event, reason) => {\n    if (reason === \"clickaway\") {\n      setSnackBar(false);\n      return;\n    }\n\n    setSnackBar(false);\n  };\n\n  const handleSnackBar = (event, reason) => {\n    if (addCartSuccess || addCartSuccess == null) setSnackBar(true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Card, {\n      className: classes.root,\n      variant: \"outlined\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.details,\n        children: [/*#__PURE__*/_jsxDEV(CardContent, {\n          className: classes.content,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            component: \"h5\",\n            variant: \"h5\",\n            children: title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle1\",\n            color: \"textSecondary\",\n            noWrap: true,\n            children: description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle1\",\n            color: \"textSecondary\",\n            children: [\"Rs.\", price]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this), role === \"ROLE_SELLER\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(MyButton, {\n            tip: \"Edit\",\n            onClick: openEdit,\n            children: /*#__PURE__*/_jsxDEV(EditIcon, {\n              style: {\n                color: \"green\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(MyButton, {\n            tip: \"Delete\",\n            onClick: handleDelete,\n            children: /*#__PURE__*/_jsxDEV(DeleteIcon, {\n              style: {\n                color: \"#f44336\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }, this) : authenticated ? /*#__PURE__*/_jsxDEV(Button, {\n          color: \"secondary\",\n          style: {\n            color: \"#000\",\n            width: \"60%\",\n            marginLeft: \"20%\",\n            marginBottom: \"10%\"\n          },\n          onClick: () => {\n            handleCart();\n            handleSnackBar();\n          },\n          variant: \"contained\",\n          children: \"Add to Cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            color: \"secondary\",\n            style: {\n              color: \"#000\",\n              width: \"60%\",\n              marginLeft: \"20%\",\n              marginBottom: \"10%\"\n            },\n            variant: \"contained\",\n            children: \"Add to Cart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardMedia, {\n        className: classes.cover,\n        image: finalImageUrl,\n        title: \"Item order\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ItemDialog, {\n      open: open,\n      handleClose: handleClose,\n      handleSubmit: handleSubmit,\n      handleFileSelect: handleFileSelect,\n      inputs: inputs,\n      handleInputChange: handleInputChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.snackbar,\n      children: /*#__PURE__*/_jsxDEV(Snackbar, {\n        open: openSnackBar,\n        autoHideDuration: 3600,\n        onClose: handleCloseSnackBar,\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          onClose: handleCloseSnackBar,\n          style: {\n            backgroundColor: \"#157a21\"\n          },\n          children: \"Item added to cart!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ItemCard, \"xG//EcIn2KGncEI7a0HK2jsnT2M=\", false, function () {\n  return [useStyles, useDispatch, useSelector, useSelector, useForm];\n});\n\n_c2 = ItemCard;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Alert\");\n$RefreshReg$(_c2, \"ItemCard\");","map":{"version":3,"sources":["/Users/Haseeb/im_seeb/Bootcamp2020/food-store/src/components/ItemCard.js"],"names":["React","useState","useDispatch","useSelector","Link","makeStyles","Card","CardContent","CardMedia","Button","Typography","Snackbar","MuiAlert","DeleteIcon","EditIcon","useForm","MyButton","deleteItem","editItem","ItemDialog","addToCart","useStyles","theme","root","display","details","flexDirection","content","flex","cover","height","width","snackbar","marginTop","spacing","Alert","props","ItemCard","classes","title","imageUrl","description","price","_id","imageUrlSplit","split","finalImageUrl","process","env","REACT_APP_SERVER_URL","dispatch","authenticated","account","role","state","auth","addCartSuccess","data","open","setOpen","openSnackBar","setSnackBar","image","setImage","inputs","handleInputChange","handleFileSelect","event","target","files","handleClose","handleSubmit","itemData","FormData","append","openEdit","handleDelete","handleCart","itemId","handleCloseSnackBar","reason","handleSnackBar","textAlign","color","marginLeft","marginBottom","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\n\n//m-ui\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport MuiAlert from \"@material-ui/lab/Alert\";\n\n// Icons\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport EditIcon from \"@material-ui/icons/Edit\";\n\n//custom-hook\nimport useForm from \"../hooks/forms\";\n\nimport MyButton from \"../util/MyButton\";\nimport { deleteItem, editItem } from \"../redux/actions/dataActions\";\nimport ItemDialog from \"../components/ItemDialog\";\nimport { addToCart } from \"../redux/actions/dataActions\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n  },\n  details: {\n    display: \"flex\",\n    flexDirection: \"column\",\n  },\n  content: {\n    flex: \"1 0 auto\",\n  },\n  cover: {\n    height: \"180\",\n    width: \"60%\",\n  },\n  snackbar: {\n    width: \"100%\",\n    \"& > * + *\": {\n      marginTop: theme.spacing(2),\n    },\n  },\n}));\n\nfunction Alert(props) {\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\n\nexport default function ItemCard(props) {\n  const classes = useStyles();\n  const { title, imageUrl, description, price, _id } = props;\n  const imageUrlSplit = imageUrl.split(\"\\\\\");\n  const finalImageUrl = `${process.env.REACT_APP_SERVER_URL}/${imageUrlSplit[0]}/${imageUrlSplit[1]}`; //3002 - server port\n\n  const dispatch = useDispatch();\n\n  const {\n    authenticated,\n    account: { role },\n  } = useSelector((state) => state.auth);\n  const { addCartSuccess } = useSelector((state) => state.data);\n\n  const [open, setOpen] = useState(false);\n  const [openSnackBar, setSnackBar] = useState(false);\n  const [image, setImage] = useState(null);\n  const { inputs, handleInputChange } = useForm({\n    title: \"\",\n    description: \"\",\n    price: \"\",\n  });\n\n  const handleFileSelect = (event) => {\n    setImage(event.target.files[0]);\n  };\n\n  const handleClose = () => {\n    inputs.title = \"\";\n    inputs.description = \"\";\n    inputs.price = \"\";\n    setImage(null);\n    setOpen(false);\n  };\n\n  const handleSubmit = () => {\n    const itemData = new FormData();\n    if (image !== null) itemData.append(\"image\", image);\n    else itemData.append(\"image\", imageUrl);\n    itemData.append(\"title\", inputs.title);\n    itemData.append(\"description\", inputs.description);\n    itemData.append(\"price\", inputs.price);\n    dispatch(editItem(itemData, _id)); // eslint-disable-next-line\n    handleClose();\n  };\n\n  const openEdit = () => {\n    inputs.title = title;\n    inputs.price = price;\n    inputs.description = description;\n    setOpen(true);\n  };\n\n  const handleDelete = () => {\n    dispatch(deleteItem(_id));\n  };\n\n  const handleCart = () => {\n    const itemData = {\n      itemId: _id,\n    };\n    dispatch(addToCart(itemData));\n  };\n\n  const handleCloseSnackBar = (event, reason) => {\n    if (reason === \"clickaway\") {\n      setSnackBar(false);\n      return;\n    }\n\n    setSnackBar(false);\n  };\n\n  const handleSnackBar = (event, reason) => {\n    if (addCartSuccess || addCartSuccess == null) setSnackBar(true);\n  };\n\n  return (\n    <>\n      <Card className={classes.root} variant=\"outlined\">\n        <div className={classes.details}>\n          <CardContent className={classes.content}>\n            <Typography component=\"h5\" variant=\"h5\">\n              {title}\n            </Typography>\n            <Typography variant=\"subtitle1\" color=\"textSecondary\" noWrap>\n              {description}\n            </Typography>\n            <Typography variant=\"subtitle1\" color=\"textSecondary\">\n              Rs.{price}\n            </Typography>\n          </CardContent>\n          {role === \"ROLE_SELLER\" ? (\n            <div style={{ textAlign: \"center\" }}>\n              <MyButton tip=\"Edit\" onClick={openEdit}>\n                <EditIcon style={{ color: \"green\" }} />\n              </MyButton>\n              <MyButton tip=\"Delete\" onClick={handleDelete}>\n                <DeleteIcon style={{ color: \"#f44336\" }} />\n              </MyButton>\n            </div>\n          ) : authenticated ? (\n            <Button\n              color=\"secondary\"\n              style={{\n                color: \"#000\",\n                width: \"60%\",\n                marginLeft: \"20%\",\n                marginBottom: \"10%\",\n              }}\n              onClick={() => {\n                handleCart();\n                handleSnackBar();\n              }}\n              variant=\"contained\"\n            >\n              Add to Cart\n            </Button>\n          ) : (\n            <Link to=\"/login\">\n              <Button\n                color=\"secondary\"\n                style={{\n                  color: \"#000\",\n                  width: \"60%\",\n                  marginLeft: \"20%\",\n                  marginBottom: \"10%\",\n                }}\n                variant=\"contained\"\n              >\n                Add to Cart\n              </Button>\n            </Link>\n          )}\n        </div>\n        <CardMedia\n          className={classes.cover}\n          image={finalImageUrl}\n          title=\"Item order\"\n        />\n      </Card>\n      <ItemDialog\n        open={open}\n        handleClose={handleClose}\n        handleSubmit={handleSubmit}\n        handleFileSelect={handleFileSelect}\n        inputs={inputs}\n        handleInputChange={handleInputChange}\n      />\n      <div className={classes.snackbar}>\n        <Snackbar\n          open={openSnackBar}\n          autoHideDuration={3600}\n          onClose={handleCloseSnackBar}\n        >\n          <Alert\n            onClose={handleCloseSnackBar}\n            style={{ backgroundColor: \"#157a21\" }}\n          >\n            Item added to cart!\n          </Alert>\n        </Snackbar>\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}